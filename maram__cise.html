<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<link rel="stylesheet" href="style.css" type="text/css">
<title>file_system__cise.html</title>
</head>
<body>
<p>why3doc index <a href="index.html">index</a></p>
<hr>
<div class="why3doc">
<pre><span class="keyword1">module</span> <a name="CiseAnalysis_">CiseAnalysis</a>

 <span class="keyword1">use</span> <span class="keyword1">export</span> why3.BuiltIn.BuiltIn
 <span class="keyword1">use</span> <span class="keyword1">export</span> why3.Bool.Bool
 <span class="keyword1">use</span> <span class="keyword1">export</span> why3.Unit.Unit
 <span class="keyword1">use</span> <span class="keyword1">export</span> maram.<a href="maram.html#Maram_">Maram</a>
 <span class="keyword1">use</span> <span class="keyword1">export</span> why3.Tuple2.Tuple2
 <span class="keyword1">use</span> <span class="keyword1">export</span> int.<a href="int.html#Int_">Int</a>
 <span class="keyword1">use</span> <span class="keyword1">import</span> map.<a href="map.html#Map_">Map</a> <span class="keyword1">as</span> M
 <span class="keyword1">use</span> <span class="keyword1">import</span> set.<a href="set.html#Fset_">Fset</a> <span class="keyword1">as</span> F
 <span class="keyword1">use</span> seq.<a href="seq.html#Seq_">Seq</a>, seq.<a href="seq.html#Mem_">Mem</a>, seq.<a href="seq.html#Distinct_">Distinct</a>

<span class="keyword1">predicate</span> <a name="same_ext_13">same_ext</a> (m1 m2: 'a -&gt; 'b) = <span class="keyword1">forall</span> x: 'a. m1 x = m2 x

<span class="keyword1">val</span> <a name="equal_elt_15">equal_elt</a> (e1 e2 : <a href="file_system.html#elt_20">elt</a>) : bool
 <span class="keyword2">ensures</span> {result &lt;-&gt; e1 = e2}

<span class="keyword1">let</span> <span class="keyword1">ghost</span> <span class="keyword1">predicate</span> <a name="state_equality_18">state_equality</a> (s1 s2 : <a href="file_system.html#state_85">state</a>)
 =
   <a href="#same_ext_13">same_ext</a> s1.<a href="file_system.html#parent_87">parent</a> s2.<a href="file_system.html#parent_87">parent</a> &amp;&amp;
   <a href="#equal_elt_15">equal_elt</a> s1.<a href="file_system.html#root_89">root</a> s2.<a href="file_system.html#root_89">root</a> &amp;&amp;
   F.(<a href="set.html#infix%20==_247">==</a>) s1.<a href="file_system.html#nodes_91">nodes</a> s2.<a href="file_system.html#nodes_91">nodes</a>

<span class="keyword1">let</span> <span class="keyword1">ghost</span> <a name="move_move_analysis_24">move_move_analysis</a> (<span class="keyword1">ghost</span> _:()) : (<a href="file_system.html#state_85">state</a>, <a href="file_system.html#state_85">state</a>)
   <span class="keyword2">ensures</span>  { <span class="keyword1">match</span> result <span class="keyword1">with</span>
		| x1, x2 -&gt; <a href="#state_equality_18">state_equality</a> x1 x2
		<span class="keyword1">end</span> }  =
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> c1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> np1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state1 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> c2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> np2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state2 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword2">assume</span> { (F.<a href="set.html#mem_244">mem</a> np1 state1.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (F.<a href="set.html#mem_244">mem</a> np2 state2.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (F.<a href="set.html#mem_244">mem</a> c1 state1.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (F.<a href="set.html#mem_244">mem</a> c2 state2.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (<span class="keyword1">not</span> (<a href="file_system.html#reachability_44">reachability</a> state1.<a href="file_system.html#parent_87">parent</a> np1 c1)) /\
	    (<span class="keyword1">not</span> (<a href="file_system.html#reachability_44">reachability</a> state2.<a href="file_system.html#parent_87">parent</a> np2 c2)) /\
	    (c1 &lt;&gt; state1.<a href="file_system.html#root_89">root</a>) /\
	    (c2 &lt;&gt; state2.<a href="file_system.html#root_89">root</a>) /\
	    (c1 &lt;&gt; np1) /\
	    (c2 &lt;&gt; np2) /\
	    <a href="#state_equality_18">state_equality</a> state1 state2 };
  <a href="file_system.html#move_134">move</a> c1 np1 state1;
  <a href="file_system.html#move_134">move</a> c2 np2 state1;
  <a href="file_system.html#move_134">move</a> c2 np2 state2;
  <a href="file_system.html#move_134">move</a> c1 np1 state2;
  (state1, state2)

<span class="keyword1">let</span> <span class="keyword1">ghost</span> <a name="remove_remove_analysis_51">remove_remove_analysis</a> (<span class="keyword1">ghost</span> _:()) : (<a href="file_system.html#state_85">state</a>, <a href="file_system.html#state_85">state</a>)
   <span class="keyword2">ensures</span>  { <span class="keyword1">match</span> result <span class="keyword1">with</span>
		| x1, x2 -&gt; <a href="#state_equality_18">state_equality</a> x1 x2
		<span class="keyword1">end</span> } =
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state1 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state2 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword2">assume</span> { (F.<a href="set.html#mem_244">mem</a> n1 state1.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (F.<a href="set.html#mem_244">mem</a> n2 state2.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (<span class="keyword1">forall</span> x. state1.<a href="file_system.html#parent_87">parent</a> x &lt;&gt; n1 ) /\
	    (<span class="keyword1">forall</span> x. state2.<a href="file_system.html#parent_87">parent</a> x &lt;&gt; n2 ) /\
	    (n1 &lt;&gt; state1.<a href="file_system.html#root_89">root</a>) /\
	    (n2 &lt;&gt; state2.<a href="file_system.html#root_89">root</a>) /\
	   <a href="#state_equality_18">state_equality</a> state1 state2 };
   <a href="file_system.html#remove_128">remove</a> n2 state1;
   <a href="file_system.html#remove_128">remove</a> n1 state1;
   <a href="file_system.html#remove_128">remove</a> n1 state2;
   <a href="file_system.html#remove_128">remove</a> n2 state2;
   (state1, state2)

<span class="keyword1">let</span> <span class="keyword1">ghost</span> <a name="add_add_analysis_72">add_add_analysis</a> (<span class="keyword1">ghost</span> _:()) : (<a href="file_system.html#state_85">state</a>, <a href="file_system.html#state_85">state</a>)
   <span class="keyword2">ensures</span>  { <span class="keyword1">match</span> result <span class="keyword1">with</span>
		| x1, x2 -&gt; <a href="#state_equality_18">state_equality</a> x1 x2
		<span class="keyword1">end</span> } =
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> p1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state1 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> p2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state2 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword2">assume</span> { ((<span class="keyword1">not</span> F.<a href="set.html#mem_244">mem</a> n1 (<a href="file_system.html#nodes_91">nodes</a> state1) /\ F.<a href="set.html#mem_244">mem</a> p1 (<a href="file_system.html#nodes_91">nodes</a> state1)) /\
	    <span class="keyword1">not</span> F.<a href="set.html#mem_244">mem</a> n2 (<a href="file_system.html#nodes_91">nodes</a> state2) /\ F.<a href="set.html#mem_244">mem</a> p2 (<a href="file_system.html#nodes_91">nodes</a> state2)) /\
	    <a href="#state_equality_18">state_equality</a> state1 state2 };
   <a href="file_system.html#add_119">add</a> n1 p1 state1;
   <a href="file_system.html#add_119">add</a> n2 p2 state1;
   <a href="file_system.html#add_119">add</a> n2 p2 state2;
   <a href="file_system.html#add_119">add</a> n1 p1 state2;
   (state1, state2)

<span class="keyword1">let</span> <span class="keyword1">ghost</span> <a name="remove_move_analysis_91">remove_move_analysis</a> (<span class="keyword1">ghost</span> _:()) : (<a href="file_system.html#state_85">state</a>, <a href="file_system.html#state_85">state</a>)
   <span class="keyword2">ensures</span>  { <span class="keyword1">match</span> result <span class="keyword1">with</span>
		| x1, x2 -&gt; <a href="#state_equality_18">state_equality</a> x1 x2
		<span class="keyword1">end</span> } =
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state1 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> c2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> np2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state2 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword2">assume</span> { (<span class="keyword1">forall</span> x. state1.<a href="file_system.html#parent_87">parent</a> x &lt;&gt; n1 ) /\
	    (n1 &lt;&gt; state1.<a href="file_system.html#root_89">root</a>) /\
	    (F.<a href="set.html#mem_244">mem</a> np2 state2.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (F.<a href="set.html#mem_244">mem</a> c2 state2.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (<span class="keyword1">not</span> (<a href="file_system.html#reachability_44">reachability</a> state2.<a href="file_system.html#parent_87">parent</a> np2 c2)) /\
	    (c2 &lt;&gt; state2.<a href="file_system.html#root_89">root</a>) /\
	    (c2 &lt;&gt; np2) /\
	    <a href="#state_equality_18">state_equality</a> state1 state2 };
   <a href="file_system.html#move_134">move</a> c2 np2 state1;
   <a href="file_system.html#remove_128">remove</a> n1 state1;
   <a href="file_system.html#remove_128">remove</a> n1 state2;
   <a href="file_system.html#move_134">move</a> c2 np2 state2;
   (state1, state2)

<span class="keyword1">let</span> <span class="keyword1">ghost</span> <a name="add_move_analysis_114">add_move_analysis</a> (<span class="keyword1">ghost</span> _:()) : (<a href="file_system.html#state_85">state</a>, <a href="file_system.html#state_85">state</a>)
   <span class="keyword2">ensures</span>  { <span class="keyword1">match</span> result <span class="keyword1">with</span>
		| x1, x2 -&gt; <a href="#state_equality_18">state_equality</a> x1 x2
		<span class="keyword1">end</span> } =
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> p1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state1 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> c2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> np2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state2 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword2">assume</span> { (<span class="keyword1">not</span> F.<a href="set.html#mem_244">mem</a> n1 (<a href="file_system.html#nodes_91">nodes</a> state1) /\ F.<a href="set.html#mem_244">mem</a> p1 (<a href="file_system.html#nodes_91">nodes</a> state1)) /\
	    (F.<a href="set.html#mem_244">mem</a> np2 state2.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (F.<a href="set.html#mem_244">mem</a> c2 state2.<a href="file_system.html#nodes_91">nodes</a>) /\
	    (<span class="keyword1">not</span> (<a href="file_system.html#reachability_44">reachability</a> state2.<a href="file_system.html#parent_87">parent</a> np2 c2)) /\
	    (<span class="keyword1">not</span> (<a href="file_system.html#reachability_44">reachability</a> state1.<a href="file_system.html#parent_87">parent</a> np2 c2)) /\
	    (c2 &lt;&gt; state2.<a href="file_system.html#root_89">root</a>) /\
	     (c2 &lt;&gt; np2) /\
	    <a href="#state_equality_18">state_equality</a> state1 state2 };
   <a href="file_system.html#add_119">add</a> n1 p1 state1;
   <a href="file_system.html#move_134">move</a> c2 np2 state1;
   <a href="file_system.html#move_134">move</a> c2 np2 state2;
   <a href="file_system.html#add_119">add</a> n1 p1 state2;
   (state1, state2)

<span class="keyword1">let</span> <span class="keyword1">ghost</span> <a name="add_remove_analysis_138">add_remove_analysis</a> (<span class="keyword1">ghost</span> _:()) : (<a href="file_system.html#state_85">state</a>, <a href="file_system.html#state_85">state</a>)
   <span class="keyword2">ensures</span>  { <span class="keyword1">match</span> result <span class="keyword1">with</span>
		| x1, x2 -&gt; <a href="#state_equality_18">state_equality</a> x1 x2
		<span class="keyword1">end</span> } =
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> p1 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state1 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> n2 = <span class="keyword1">any</span> <a href="file_system.html#elt_20">elt</a> <span class="keyword1">in</span>
   <span class="keyword1">let</span> <span class="keyword1">ghost</span> state2 = <span class="keyword1">any</span> <a href="file_system.html#state_85">state</a> <span class="keyword1">in</span>
   <span class="keyword2">assume</span> { (<span class="keyword1">not</span> F.<a href="set.html#mem_244">mem</a> n1 (<a href="file_system.html#nodes_91">nodes</a> state1) /\ F.<a href="set.html#mem_244">mem</a> p1 (<a href="file_system.html#nodes_91">nodes</a> state1)) /\
	    (<span class="keyword1">forall</span> x. state2.<a href="file_system.html#parent_87">parent</a> x &lt;&gt; n2 ) /\
	    (n2 &lt;&gt; state2.<a href="file_system.html#root_89">root</a>) /\
	    <a href="#state_equality_18">state_equality</a> state1 state2 };
   <a href="file_system.html#remove_128">remove</a> n2 state1;
   <a href="file_system.html#add_119">add</a> n1 p1 state1;
   <a href="file_system.html#add_119">add</a> n1 p1 state2;
   <a href="file_system.html#remove_128">remove</a> n2 state2;
   (state1, state2)

<span class="keyword1">end</span>

</pre>

</div>
<hr>
<p>Generated by why3doc 1.3.1+git</p>
</body>
</html>
